# Checkpoint Configuration (LOCKED)
# ==================================
# This file defines the FIXED configuration for checkpoint (C###) runs.
# 
# ⚠️  DO NOT MODIFY without updating the hash in run_cicd_eval.py
# ⚠️  Changes require PR review and explicit hash update
#
# Checkpoints are daily health checks / CICD runs that must use
# consistent settings to enable meaningful comparisons over time.

schema_version: "1.0"
config_type: "checkpoint"

# Client (fixed for consistency)
client: "BFAI"

# Corpus (always use full gold standard)
corpus:
  file: "clients_qa_gold/BFAI/qa/QA_BFAI_gold_v1-0__q458.json"
  sample_size: 30  # Quick checkpoint uses 30 questions

# Index (fixed)
index:
  job_id: "bfai__eval66a_g1_1536_tt"

# Generator model (fixed)
# Note: gemini-3-flash-preview is available on Vertex AI global endpoint + AI Studio
generator:
  model: "gemini-3-flash-preview"
  reasoning_effort: "low"  # low | high
  temperature: 0.0  # MUST be 0.0 for reproducibility
  seed: 42  # Fixed seed for reproducibility
  max_output_tokens: 8192

# Judge model (fixed)
# Note: gemini-3-flash-preview is available on Vertex AI global endpoint + AI Studio
judge:
  model: "gemini-3-flash-preview"
  reasoning_effort: "low"  # low | high
  temperature: 0.0
  seed: 42  # Fixed seed for reproducibility

# Retrieval settings (fixed)
retrieval:
  recall_k: 100
  precision_k: 25
  enable_hybrid: true
  rrf_alpha: 0.5  # 50/50 hybrid weighting (keyword + semantic)
  enable_reranking: true
  ranking_model: "semantic-ranker-512@latest"

# Execution (fixed)
execution:
  workers: 100  # Smart throttler limits to 20 concurrent via semaphore
  timeout_per_question_s: 120

# Thresholds for pass/fail
thresholds:
  min_pass_rate: 0.85      # Minimum 85% pass rate
  max_fail_rate: 0.08      # Maximum 8% fail rate
  max_error_count: 0       # No errors allowed
